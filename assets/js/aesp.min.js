function setMask(e,t,o=!1){var n;for(n of document.querySelectorAll(e)){const r={mask:t};o&&(r.blocks={num:{mask:Number,thousandsSeparator:".",scale:2,padFractionalZeros:!0}});IMask(n,r)}}function initMasks(){setMask(".cep","00000{-}000"),setMask(".cpf","000{.}000{.}000{-}00"),setMask(".fone","00 [0]{0000-0000}"),setMask(".salario","R$ num",!0)}function callbackCep(e){if("erro"in e){const o=document.getElementById("cep");var t="CEP não encontrado.";return alert(t),console.warn(t),o.value="",o.focus(),e.errorMsg=t}return completaEndereco(e)}function consultaCep(o){o&&o.addEventListener("blur",()=>{let e=o.value;if(""===(e=e.replace(/\D/g,""))||e.length<8)return!1;if(!/^[0-9]{8}$/.test(e))return console.error("Formato de CEP inválido."),{erro:!0,errorMsg:"Formato de CEP inválido."};const t=document.createElement("script");t.src="https://viacep.com.br/ws/"+e+"/json/?callback=callbackCep",document.body.appendChild(t)})}function completaEndereco(e){const t=document.getElementById("rua"),o=(t.value=e.logradouro,document.getElementById("cidade")),n=(o.value=e.localidade,document.getElementById("uf")),r=(n.value=e.uf,document.getElementById("bairro")),s=(r.value=e.bairro,document.getElementById("numero"));s.focus()}function initCep(){consultaCep(document.getElementById("cep"))}function ajax_curriculo_form(){const d=document.getElementById("form-curriculo");if(typeof d!==d&&d){const l=d.querySelector("button");l.disabled||d.addEventListener("submit",e=>{e.preventDefault();const c=d.querySelector(".form-load-wrapper"),t=(c.style.display="block",document.getElementById("success-message")),o=(t,t&&t.remove(),d.querySelectorAll(".error-message")),n=(o.forEach(e=>e.remove()),d.querySelectorAll(".error"));n.forEach(e=>e.classList.remove("error")),l.disabled=!0;document.getElementById("nome"),document.getElementById("sobrenome"),document.getElementById("email"),document.getElementById("cep"),document.getElementById("rua"),document.getElementById("numero"),document.getElementById("bairro"),document.getElementById("complemento"),document.getElementById("cidade"),document.getElementById("uf"),document.getElementById("cpf"),document.getElementById("fone"),document.getElementById("rede-social"),document.getElementById("cargo"),document.getElementById("formacao"),document.getElementById("outros-cursos"),document.getElementById("experiencia"),document.getElementById("salario"),document.getElementById("info");const r=new FormData(d),a=(r.append("action","aesp_post_curriculo_form"),new XMLHttpRequest);a.open("POST",ajax_object.ajax_url,!0),a.onreadystatechange=function(e){if(4===this.readyState&&200===this.status){const e=JSON.parse(a.responseText);if(e.error_messages){const t=document.createElement("ul");t.classList.add("error-messages");for(const o in e.error_messages){const n=document.getElementById(o),r=(n,n&&n.classList.add("error"),document.createElement("li"));r.classList.add("error-message"),r.innerHTML='<i class="fas fa-times"></i> '+e.error_messages[o],t.append(r)}d.append(t)}else if(e.success){const s=document.createElement("div");s.id="success-message",s.classList.add("success-message"),s.innerHTML='<i class="fas fa-check"></i> Formulário enviado com sucesso!',d.append(s)}}4===this.readyState&&404===this.status&&console.log("An error occurred"),l.disabled=!1,c.style.display="none"},a.send(r)})}}document.addEventListener("DOMContentLoaded",function(){initMasks(),initCep(),ajax_curriculo_form()},!1);